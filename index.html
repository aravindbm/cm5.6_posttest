<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post-Test: Nutrition Policy</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #e0f7fa; padding: 20px; color: #333; }
        .container { max-width: 700px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #006064; margin-top: 0; }
        
        /* Form Styles */
        .input-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; color: #00838f; }
        input[type="text"], input[type="number"] { width: 100%; padding: 12px; border: 1px solid #b2ebf2; border-radius: 6px; box-sizing: border-box; }
        
        .q-card { background: #fff; padding: 15px; margin-bottom: 20px; border: 1px solid #e0e0e0; border-radius: 8px; }
        .q-text { font-weight: 600; font-size: 1.1em; margin-bottom: 10px; display: block; }
        .opt-label { display: block; padding: 8px; cursor: pointer; }
        .opt-label:hover { background: #f5f5f5; border-radius: 4px; }
        
        .btn { width: 100%; padding: 15px; background: #0097a7; color: white; border: none; border-radius: 6px; font-size: 1.1em; cursor: pointer; font-weight: bold; transition: background 0.3s; }
        .btn:hover { background: #00838f; }
        .btn:disabled { background: #b0bec5; cursor: not-allowed; }

        /* Report Card Styles */
        .report-card { margin-top: 20px; border-top: 2px solid #eee; padding-top: 20px; }
        .result-item { background: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 5px solid #ccc; }
        
        .result-item.correct { border-left-color: #4caf50; background: #e8f5e9; }
        .result-item.wrong { border-left-color: #f44336; background: #ffebee; }
        
        .ans-row { margin: 5px 0; font-size: 0.95em; }
        .user-ans { font-weight: bold; }
        .correct-ans { color: #2e7d32; font-weight: bold; }
        .explanation { display: block; margin-top: 10px; font-size: 0.9em; color: #555; font-style: italic; background: rgba(255,255,255,0.5); padding: 8px; border-radius: 4px; }
    </style>
</head>
<body>

<div class="container" id="quiz-ui">
    <h2>üéì Post-Test: Check how much you leart after the class</h2>
    <p style="text-align:center; color:#666;">CM 5.6: National Nutrition Policy & Programs</p>
    
    <form id="postForm">
        <div class="input-group">
            <label>Full Name</label>
            <input type="text" name="Name" required placeholder="Dr. Name">
        </div>
        <div class="input-group">
            <label>Roll Number</label>
            <input type="number" name="Roll Number" required placeholder="e.g. 24001">
        </div>
        
        <div id="questions"></div>
        
        <button class="btn" id="subBtn">Submit & View Report</button>
    </form>
</div>

<div class="container" id="report-ui" style="display:none;">
    <h1 style="text-align:center; color:#006064;">Score: <span id="finalScore"></span>/10</h1>
    <p style="text-align:center;">Scroll down to review your answers.</p>
    <div id="feedback" class="report-card"></div>
    <button class="btn" onclick="location.reload()" style="margin-top:20px;">Close / New Attempt</button>
</div>

<script>
    // ******************************************************
    // PASTE YOUR GOOGLE APPS SCRIPT URL INSIDE THE QUOTES BELOW
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwD4Oejw8pSvBVmzoAnqiOs_Ylnw-LcvZ2CliUwtB_ItYYFahW4yi1S0PgpEv6nBNyU/exec';
    // ******************************************************
    
    const targetTab = 'PostTest'; 

    const questions = [
        { 
            q: "1. The National Nutrition Policy was adopted by the Govt of India in which year?", 
            opts: ["1975", "1993", "2000", "2013"], 
            a: "1993",
            exp: "The policy was adopted in 1993 under the aegis of the Dept of Women and Child Development to tackle malnutrition via direct and indirect interventions."
        },
        { 
            q: "2. Which is NOT one of the six services provided under the ICDS scheme?", 
            opts: ["Supplementary Nutrition", "Non-formal Pre-school Education", "Cash Transfer for Hospital Delivery", "Immunization"], 
            a: "Cash Transfer for Hospital Delivery",
            exp: "Cash transfers for delivery fall under schemes like JSY or PMMVY. ICDS services are Immunization, Supp. Nutrition, Health Checkup, Referral, Pre-school, and Health Ed."
        },
        { 
            q: "3. Under PM POSHAN (Mid-Day Meal), a primary school child (Class 1-5) is entitled to:", 
            opts: ["300 Kcal", "450 Kcal", "700 Kcal", "800 Kcal"], 
            a: "450 Kcal",
            exp: "Norms: Primary (Class 1-5) gets 450 Kcal & 12g Protein. Upper Primary (Class 6-8) gets 700 Kcal & 20g Protein."
        },
        { 
            q: "4. The '6x6x6' strategy is the hallmark of which program?", 
            opts: ["National Iodine Deficiency Control", "Anemia Mukt Bharat (AMB)", "Vitamin A Prophylaxis", "Bal Swasthya Karyakram"], 
            a: "Anemia Mukt Bharat (AMB)",
            exp: "AMB uses the 6x6x6 strategy: 6 Beneficiaries, 6 Interventions, and 6 Institutional Mechanisms."
        },
        { 
            q: "5. Under ICDS, who is the principal worker at the village level?", 
            opts: ["ASHA", "ANM", "Anganwadi Worker (AWW)", "Village Health Guide"], 
            a: "Anganwadi Worker (AWW)",
            exp: "The Anganwadi Worker (AWW) is the community-based frontline worker for ICDS. The ASHA works primarily under NHM."
        },
        { 
            q: "6. What is the prophylactic Iron & Folic Acid dose for pregnant women under AMB?", 
            opts: ["45 mg Iron + 400 mcg Folic Acid", "60 mg Iron + 500 mcg Folic Acid", "100 mg Iron + 500 mcg Folic Acid", "20 mg Iron + 100 mcg Folic Acid"], 
            a: "60 mg Iron + 500 mcg Folic Acid",
            exp: "For prophylaxis in pregnancy: Daily 60mg Elemental Iron + 500mcg Folic Acid. (Note: 100mg was the old dose; it is now 60mg under AMB)."
        },
        { 
            q: "7. 'Poshan Maah' (Nutrition Month) is celebrated annually in which month?", 
            opts: ["January", "April", "September", "November"], 
            a: "September",
            exp: "September is celebrated as Rashtriya Poshan Maah to mobilize community participation for nutrition."
        },
        { 
            q: "8. Which ministry is the nodal agency for the implementation of ICDS?", 
            opts: ["MoHFW", "Ministry of Women and Child Dev (MWCD)", "Ministry of Education", "Ministry of Rural Dev"], 
            a: "Ministry of Women and Child Dev (MWCD)",
            exp: "While Health (Immunization) is supported by MoHFW, the administrative control and funding of ICDS lies with MWCD."
        },
        { 
            q: "9. In National Nutrition Policy, 'Direct Interventions' include all EXCEPT:", 
            opts: ["Fortification of essential foods", "Expanding PDS", "Control of Micronutrient deficiencies", "Land Reforms"], 
            a: "Land Reforms",
            exp: "Land reforms, literacy, and food security are classified as 'Indirect Policy Instruments' dealing with long-term structural changes."
        },
        { 
            q: "10. A child in an Anganwadi is plotted in the 'Orange' zone of the growth chart. What does this indicate?", 
            opts: ["Normal nutritional status", "Moderately Underweight", "Severely Underweight", "Overweight"], 
            a: "Moderately Underweight",
            exp: "On the growth chart used in this context: Green is Normal, Yellow/Orange typically denotes Underweight categories requiring attention (Moderate/Severe)."
        }
    ];

    // Render Questions
    const qDiv = document.getElementById('questions');
    questions.forEach((q, i) => {
        qDiv.innerHTML += `
            <div class="q-card">
                <span class="q-text">${q.q}</span>
                ${q.opts.map(o => `
                    <label class="opt-label">
                        <input type="radio" name="q${i}" value="${o}" required> ${o}
                    </label>
                `).join('')}
            </div>
        `;
    });

    // Handle Submit
    document.getElementById('postForm').addEventListener('submit', e => {
        e.preventDefault();
        const btn = document.getElementById('subBtn');
        btn.disabled = true;
        btn.innerText = "Analyzing Results...";
        
        let score = 0;
        let ansStr = "";
        let feedbackHTML = "";
        const fd = new FormData(document.getElementById('postForm'));
        
        questions.forEach((q, i) => {
            let userAns = fd.get(`q${i}`);
            let isCorrect = (userAns === q.a);
            
            if(isCorrect) score++;
            
            // Log for Sheet
            ansStr += `${i+1}:${isCorrect?'‚úÖ':'‚ùå'} | `;

            // Build Report Card UI
            feedbackHTML += `
                <div class="result-item ${isCorrect ? 'correct' : 'wrong'}">
                    <div style="font-weight:bold; margin-bottom:5px;">Q${i+1}: ${q.q}</div>
                    
                    <div class="ans-row">
                        You Answered: 
                        <span class="user-ans" style="color:${isCorrect?'green':'red'}">
                            ${userAns} ${isCorrect ? '‚úÖ' : '‚ùå'}
                        </span>
                    </div>

                    ${!isCorrect ? `
                    <div class="ans-row">
                        Correct Answer: <span class="correct-ans">${q.a}</span>
                    </div>` : ''}

                    <div class="explanation">üí° <strong>Why?</strong> ${q.exp}</div>
                </div>
            `;
        });

        fd.append("Score", score);
        fd.append("Answers", ansStr);
        fd.append("sheetName", targetTab);

        fetch(scriptURL, { method: 'POST', body: fd })
            .then(() => {
                document.getElementById('quiz-ui').style.display = 'none';
                document.getElementById('report-ui').style.display = 'block';
                document.getElementById('finalScore').innerText = score;
                document.getElementById('feedback').innerHTML = feedbackHTML;
                window.scrollTo(0,0);
            })
            .catch(err => {
                alert("Error submitting. Please check your internet connection.");
                btn.disabled = false;
                btn.innerText = "Submit & View Report";
            });
    });
</script>
</body>
</html>

